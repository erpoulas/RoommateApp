<h1>Task List</h1>

<!-- Task Creation Form -->
<form method="post" action="/add-task">
  <input type="text" name="taskName" placeholder="Enter a new task" required>
  <button type="submit">Add Task</button>
</form>

<!-- Task List -->
<ul>
  {{#each tasks}}
    <li>
      {{task_name}} - 
      {{#if assigned_user}}
        Assigned to: {{assigned_user}}
      {{else}}
        <span>Unassigned</span>
      {{/if}}
      <button onclick="completeTask({{id}})">Mark Complete</button>
    </li>
  {{/each}}
</ul>

<!-- Random Assignment Button -->
<button onclick="randomizeTasks()">Randomly Assign Tasks</button>

<script>
  function randomizeTasks() {
    fetch('/random-assign-tasks', { method: 'POST' })
      .then(() => location.reload());
  }

  function completeTask(taskId) {
    fetch(`/complete-task/${taskId}`, { method: 'POST' })
      .then(() => location.reload());
  }
</script>
